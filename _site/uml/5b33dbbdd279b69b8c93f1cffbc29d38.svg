<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1605px" preserveAspectRatio="none" style="width:1891px;height:1605px;" version="1.1" viewBox="0 0 1891 1605" width="1891px" zoomAndPan="magnify"><defs><filter height="300%" id="f1axw2icjgv2b1" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1axw2icjgv2b1)" height="150.4688" style="stroke: #000000; stroke-width: 2.0;" width="1269" x="229" y="259.2266"/><rect fill="#FFFFFF" filter="url(#f1axw2icjgv2b1)" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="443" x="796" y="312.4922"/><rect fill="#FFFFFF" height="43.9375" style="stroke: none; stroke-width: 1.0;" width="1269" x="229" y="365.7578"/><rect fill="#FFFFFF" filter="url(#f1axw2icjgv2b1)" height="90.2031" style="stroke: #000000; stroke-width: 2.0;" width="1393" x="229" y="452.8281"/><rect fill="#FFFFFF" height="43.9375" style="stroke: none; stroke-width: 1.0;" width="1393" x="229" y="499.0938"/><rect fill="#FFFFFF" filter="url(#f1axw2icjgv2b1)" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="1393" x="229" y="557.0313"/><rect fill="#FFFFFF" filter="url(#f1axw2icjgv2b1)" height="90.2031" style="stroke: #000000; stroke-width: 2.0;" width="1269" x="229" y="617.2969"/><rect fill="#FFFFFF" height="43.9375" style="stroke: none; stroke-width: 1.0;" width="1269" x="229" y="663.5625"/><rect fill="#FFFFFF" filter="url(#f1axw2icjgv2b1)" height="400.0078" style="stroke: #000000; stroke-width: 2.0;" width="1576" x="219" y="750.6328"/><rect fill="#FFFFFF" filter="url(#f1axw2icjgv2b1)" height="235.8672" style="stroke: #000000; stroke-width: 2.0;" width="1556" x="229" y="774.7656"/><rect fill="#FFFFFF" height="160.4688" style="stroke: none; stroke-width: 1.0;" width="1556" x="229" y="850.1641"/><rect fill="#FFFFFF" height="133.0078" style="stroke: none; stroke-width: 1.0;" width="1576" x="219" y="1017.6328"/><rect fill="#FFFFFF" filter="url(#f1axw2icjgv2b1)" height="104.2031" style="stroke: #000000; stroke-width: 2.0;" width="1269" x="229" y="1039.4375"/><rect fill="#FFFFFF" height="73.0703" style="stroke: none; stroke-width: 1.0;" width="1269" x="229" y="1070.5703"/><rect fill="#FFFFFF" filter="url(#f1axw2icjgv2b1)" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="1543" x="337" y="1222.9063"/><rect fill="#FFFFFF" filter="url(#f1axw2icjgv2b1)" height="119.3359" style="stroke: #000000; stroke-width: 2.0;" width="1269" x="229" y="1428.8359"/><rect fill="#FFFFFF" height="43.9375" style="stroke: none; stroke-width: 1.0;" width="1269" x="229" y="1504.2344"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="68" x2="68" y1="38.2969" y2="1565.1719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="183" x2="183" y1="38.2969" y2="1565.1719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="288" x2="288" y1="38.2969" y2="1565.1719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="440" x2="440" y1="38.2969" y2="1565.1719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="618" x2="618" y1="38.2969" y2="1565.1719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="749" x2="749" y1="38.2969" y2="1565.1719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="934" x2="934" y1="38.2969" y2="1565.1719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1150" x2="1150" y1="38.2969" y2="1565.1719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1363" x2="1363" y1="38.2969" y2="1565.1719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1555" x2="1555" y1="38.2969" y2="1565.1719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1649" x2="1649" y1="38.2969" y2="1565.1719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1730" x2="1730" y1="38.2969" y2="1565.1719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1827" x2="1827" y1="38.2969" y2="1565.1719"/><rect fill="#FEFECE" filter="url(#f1axw2icjgv2b1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="116" x="8" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="15" y="22.9951">ProfilerSession</text><rect fill="#FEFECE" filter="url(#f1axw2icjgv2b1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="116" x="8" y="1564.1719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="15" y="1584.167">ProfilerSession</text><rect fill="#FEFECE" filter="url(#f1axw2icjgv2b1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="87" x="138" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="145" y="22.9951">GpuTracer</text><rect fill="#FEFECE" filter="url(#f1axw2icjgv2b1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="87" x="138" y="1564.1719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="145" y="1584.167">GpuTracer</text><rect fill="#FEFECE" filter="url(#f1axw2icjgv2b1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="94" x="239" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="246" y="22.9951">CuptiTracer</text><rect fill="#FEFECE" filter="url(#f1axw2icjgv2b1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="94" x="239" y="1564.1719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="246" y="1584.167">CuptiTracer</text><rect fill="#FEFECE" filter="url(#f1axw2icjgv2b1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="183" x="347" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="169" x="354" y="22.9951">CuptiTracerCollectorImpl</text><rect fill="#FEFECE" filter="url(#f1axw2icjgv2b1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="183" x="347" y="1564.1719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="169" x="354" y="1584.167">CuptiTracerCollectorImpl</text><rect fill="#FEFECE" filter="url(#f1axw2icjgv2b1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="145" x="544" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="131" x="551" y="22.9951">PerDeviceCollector</text><rect fill="#FEFECE" filter="url(#f1axw2icjgv2b1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="145" x="544" y="1564.1719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="131" x="551" y="1584.167">PerDeviceCollector</text><rect fill="#FEFECE" filter="url(#f1axw2icjgv2b1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="89" x="703" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="710" y="22.9951">Annotation</text><rect fill="#FEFECE" filter="url(#f1axw2icjgv2b1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="89" x="703" y="1564.1719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="710" y="1584.167">Annotation</text><rect fill="#FEFECE" filter="url(#f1axw2icjgv2b1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="252" x="806" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="238" x="813" y="22.9951">CuptiDriverApiHookWithCudaEvent</text><rect fill="#FEFECE" filter="url(#f1axw2icjgv2b1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="252" x="806" y="1564.1719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="238" x="813" y="1584.167">CuptiDriverApiHookWithCudaEvent</text><rect fill="#FEFECE" filter="url(#f1axw2icjgv2b1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="153" x="1072" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="139" x="1079" y="22.9951">CudaEventRecorder</text><rect fill="#FEFECE" filter="url(#f1axw2icjgv2b1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="153" x="1072" y="1564.1719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="139" x="1079" y="1584.167">CudaEventRecorder</text><rect fill="#FEFECE" filter="url(#f1axw2icjgv2b1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="245" x="1239" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="231" x="1246" y="22.9951">CuptiDriverApiHookWithActivityApi</text><rect fill="#FEFECE" filter="url(#f1axw2icjgv2b1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="245" x="1239" y="1564.1719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="231" x="1246" y="1584.167">CuptiDriverApiHookWithActivityApi</text><rect fill="#FEFECE" filter="url(#f1axw2icjgv2b1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="110" x="1498" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="1505" y="22.9951">CuptiInterface</text><rect fill="#FEFECE" filter="url(#f1axw2icjgv2b1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="110" x="1498" y="1564.1719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="1505" y="1584.167">CuptiInterface</text><rect fill="#FEFECE" filter="url(#f1axw2icjgv2b1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="50" x="1622" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="36" x="1629" y="22.9951">Cupti</text><rect fill="#FEFECE" filter="url(#f1axw2icjgv2b1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="50" x="1622" y="1564.1719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="36" x="1629" y="1584.167">Cupti</text><rect fill="#FEFECE" filter="url(#f1axw2icjgv2b1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="1686" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="1693" y="22.9951">CutiTracer</text><rect fill="#FEFECE" filter="url(#f1axw2icjgv2b1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="1686" y="1564.1719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="1693" y="1584.167">CutiTracer</text><rect fill="#FEFECE" filter="url(#f1axw2icjgv2b1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="81" x="1785" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="67" x="1792" y="22.9951">StepStats</text><rect fill="#FEFECE" filter="url(#f1axw2icjgv2b1)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="81" x="1785" y="1564.1719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="67" x="1792" y="1584.167">StepStats</text><polygon fill="#A80036" points="171.5,65.4297,181.5,69.4297,171.5,73.4297,175.5,69.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="68" x2="177.5" y1="69.4297" y2="69.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="75" y="64.3638">Create</text><polygon fill="#A80036" points="171.5,94.5625,181.5,98.5625,171.5,102.5625,175.5,98.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="68" x2="177.5" y1="98.5625" y2="98.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="75" y="93.4966">Start</text><polygon fill="#A80036" points="276,123.6953,286,127.6953,276,131.6953,280,127.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="183.5" x2="282" y1="127.6953" y2="127.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="190.5" y="122.6294">Create</text><polygon fill="#A80036" points="428.5,152.8281,438.5,156.8281,428.5,160.8281,432.5,156.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="183.5" x2="434.5" y1="156.8281" y2="156.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="190.5" y="151.7622">Create</text><polygon fill="#A80036" points="606.5,181.9609,616.5,185.9609,606.5,189.9609,610.5,185.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="440.5" x2="612.5" y1="185.9609" y2="185.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="447.5" y="180.895">Create</text><polygon fill="#A80036" points="737.5,211.0938,747.5,215.0938,737.5,219.0938,741.5,215.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="183.5" x2="743.5" y1="215.0938" y2="215.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="190.5" y="210.0278">Enable</text><polygon fill="#A80036" points="276,240.2266,286,244.2266,276,248.2266,280,244.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="183.5" x2="282" y1="244.2266" y2="244.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="190.5" y="239.1606">Enable</text><path d="M229,259.2266 L293,259.2266 L293,266.2266 L283,276.2266 L229,276.2266 L229,259.2266 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="150.4688" style="stroke: #000000; stroke-width: 2.0;" width="1269" x="229" y="259.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="244" y="272.2935">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="191" x="308" y="271.437">[enable event-based_activity]</text><polygon fill="#A80036" points="922,293.4922,932,297.4922,922,301.4922,926,297.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="288" x2="928" y1="297.4922" y2="297.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="295" y="292.4263">Create</text><path d="M796,312.4922 L873,312.4922 L873,319.4922 L863,329.4922 L796,329.4922 L796,312.4922 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="443" x="796" y="312.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="811" y="325.5591">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="137" x="888" y="324.7026">[for each gpu device]</text><polygon fill="#A80036" points="1138.5,346.7578,1148.5,350.7578,1138.5,354.7578,1142.5,350.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="934" x2="1144.5" y1="350.7578" y2="350.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="941" y="345.6919">Create</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="229" x2="1498" y1="366.7578" y2="366.7578"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="194" x="234" y="376.9683">[disable event-based_activity]</text><polygon fill="#A80036" points="1351.5,397.6953,1361.5,401.6953,1351.5,405.6953,1355.5,401.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="288" x2="1357.5" y1="401.6953" y2="401.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="295" y="396.6294">Create</text><polygon fill="#A80036" points="1543,433.8281,1553,437.8281,1543,441.8281,1547,437.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="288" x2="1549" y1="437.8281" y2="437.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="295" y="432.7622">Register CallbackHook</text><path d="M229,452.8281 L293,452.8281 L293,459.8281 L283,469.8281 L229,469.8281 L229,452.8281 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="90.2031" style="stroke: #000000; stroke-width: 2.0;" width="1393" x="229" y="452.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="244" y="465.895">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="156" x="308" y="465.0386">[has selected callbacks]</text><polygon fill="#A80036" points="1543,487.0938,1553,491.0938,1543,495.0938,1547,491.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="288" x2="1549" y1="491.0938" y2="491.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="295" y="486.0278">Enable selected callbacks</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="229" x2="1622" y1="500.0938" y2="500.0938"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="149" x="234" y="510.3042">[no selected callbacks]</text><polygon fill="#A80036" points="1543,531.0313,1553,535.0313,1543,539.0313,1547,535.0313" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="288" x2="1549" y1="535.0313" y2="535.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="295" y="529.9653">Enable all callbacks</text><path d="M229,557.0313 L293,557.0313 L293,564.0313 L283,574.0313 L229,574.0313 L229,557.0313 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="1393" x="229" y="557.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="244" y="570.0981">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="129" x="308" y="569.2417">[enable activity api]</text><polygon fill="#A80036" points="1543,591.2969,1553,595.2969,1543,599.2969,1547,595.2969" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="288" x2="1549" y1="595.2969" y2="595.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="345" x="295" y="590.231">Register Activity Buffer allocation/deallocation callback</text><path d="M229,617.2969 L293,617.2969 L293,624.2969 L283,634.2969 L229,634.2969 L229,617.2969 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="90.2031" style="stroke: #000000; stroke-width: 2.0;" width="1269" x="229" y="617.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="244" y="630.3638">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="191" x="308" y="629.5073">[enable event-based_activity]</text><polygon fill="#A80036" points="922,651.5625,932,655.5625,922,659.5625,926,655.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="288" x2="928" y1="655.5625" y2="655.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="295" y="650.4966">Create</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="229" x2="1498" y1="664.5625" y2="664.5625"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="194" x="234" y="674.7729">[disable event-based_activity]</text><polygon fill="#A80036" points="1351.5,695.5,1361.5,699.5,1351.5,703.5,1355.5,699.5" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="288" x2="1357.5" y1="699.5" y2="699.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="295" y="694.4341">Create</text><polygon fill="#A80036" points="299,731.6328,289,735.6328,299,739.6328,295,735.6328" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="293" x2="1648" y1="735.6328" y2="735.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="305" y="730.5669">HandleCallback</text><path d="M219,750.6328 L283,750.6328 L283,757.6328 L273,767.6328 L219,767.6328 L219,750.6328 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="400.0078" style="stroke: #000000; stroke-width: 2.0;" width="1576" x="219" y="750.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="234" y="763.6997">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="191" x="298" y="762.8433">[enable event-based_activity]</text><path d="M229,774.7656 L293,774.7656 L293,781.7656 L283,791.7656 L229,791.7656 L229,774.7656 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="235.8672" style="stroke: #000000; stroke-width: 2.0;" width="1556" x="229" y="774.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="244" y="787.8325">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="68" x="308" y="786.9761">[Api Enter]</text><polygon fill="#A80036" points="945,809.0313,935,813.0313,945,817.0313,941,813.0313" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="939" x2="1729.5" y1="813.0313" y2="813.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="951" y="807.9653">OnDriverApiEnter</text><polygon fill="#A80036" points="1138.5,838.1641,1148.5,842.1641,1138.5,846.1641,1142.5,842.1641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="934" x2="1144.5" y1="842.1641" y2="842.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="941" y="837.0981">StartKernel/StartMemcpy</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="229" x2="1785" y1="851.1641" y2="851.1641"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="58" x="234" y="861.3745">[Api Exit]</text><polygon fill="#A80036" points="922,882.1016,932,886.1016,922,890.1016,926,886.1016" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="288" x2="928" y1="886.1016" y2="886.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="295" y="881.0356">OnDriverApiExit</text><polygon fill="#A80036" points="1138.5,911.2344,1148.5,915.2344,1138.5,919.2344,1142.5,915.2344" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="934" x2="1144.5" y1="915.2344" y2="915.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="941" y="910.1685">StopKernel/StopMemcpy</text><polygon fill="#A80036" points="428.5,940.3672,438.5,944.3672,428.5,948.3672,432.5,944.3672" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="288" x2="434.5" y1="944.3672" y2="944.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="295" y="939.3013">Add annotation</text><polygon fill="#A80036" points="428.5,969.5,438.5,973.5,428.5,977.5,432.5,973.5" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="288" x2="434.5" y1="973.5" y2="973.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="295" y="968.4341">Add event</text><polygon fill="#A80036" points="606.5,998.6328,616.5,1002.6328,606.5,1006.6328,610.5,1002.6328" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="440.5" x2="612.5" y1="1002.6328" y2="1002.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="447.5" y="997.5669">Add event</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="219" x2="1795" y1="1018.6328" y2="1018.6328"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="194" x="224" y="1028.8433">[disable event-based_activity]</text><path d="M229,1039.4375 L293,1039.4375 L293,1046.4375 L283,1056.4375 L229,1056.4375 L229,1039.4375 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="104.2031" style="stroke: #000000; stroke-width: 2.0;" width="1269" x="229" y="1039.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="244" y="1052.5044">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="68" x="308" y="1051.6479">[Api Enter]</text><polygon fill="#A80036" points="1351.5,1058.5703,1361.5,1062.5703,1351.5,1066.5703,1355.5,1062.5703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="288" x2="1357.5" y1="1062.5703" y2="1062.5703"/><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="229" x2="1498" y1="1071.5703" y2="1071.5703"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="58" x="234" y="1081.7808">[Api Exit]</text><polygon fill="#A80036" points="428.5,1102.5078,438.5,1106.5078,428.5,1110.5078,432.5,1106.5078" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="288" x2="434.5" y1="1106.5078" y2="1106.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="295" y="1101.4419">Add event</text><polygon fill="#A80036" points="606.5,1131.6406,616.5,1135.6406,606.5,1139.6406,610.5,1135.6406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="440.5" x2="612.5" y1="1135.6406" y2="1135.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="447.5" y="1130.5747">Add event</text><polygon fill="#A80036" points="171.5,1174.7734,181.5,1178.7734,171.5,1182.7734,175.5,1178.7734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="68" x2="177.5" y1="1178.7734" y2="1178.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="74" x="75" y="1173.7075">CollectData</text><polygon fill="#A80036" points="428.5,1203.9063,438.5,1207.9063,428.5,1211.9063,432.5,1207.9063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="183.5" x2="434.5" y1="1207.9063" y2="1207.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="41" x="190.5" y="1202.8403">Export</text><path d="M337,1222.9063 L414,1222.9063 L414,1229.9063 L404,1239.9063 L337,1239.9063 L337,1222.9063 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="1543" x="337" y="1222.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="352" y="1235.9731">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="137" x="429" y="1235.1167">[for each gpu device]</text><polygon fill="#A80036" points="606.5,1257.1719,616.5,1261.1719,606.5,1265.1719,610.5,1261.1719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="440.5" x2="612.5" y1="1261.1719" y2="1261.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="33" x="447.5" y="1256.106">Flush</text><polygon fill="#A80036" points="1815.5,1286.3047,1825.5,1290.3047,1815.5,1294.3047,1819.5,1290.3047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="618.5" x2="1821.5" y1="1290.3047" y2="1290.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="625.5" y="1285.2388">Add device stats</text><polygon fill="#A80036" points="171.5,1322.4375,181.5,1326.4375,171.5,1330.4375,175.5,1326.4375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="68" x2="177.5" y1="1326.4375" y2="1326.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="75" y="1321.3716">Stop</text><polygon fill="#A80036" points="276,1351.5703,286,1355.5703,276,1359.5703,280,1355.5703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="183.5" x2="282" y1="1355.5703" y2="1355.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="47" x="190.5" y="1350.5044">Disable</text><polygon fill="#A80036" points="1543,1380.7031,1553,1384.7031,1543,1388.7031,1547,1384.7031" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="288" x2="1549" y1="1384.7031" y2="1384.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="295" y="1379.6372">Disable Api Tracing</text><polygon fill="#A80036" points="1543,1409.8359,1553,1413.8359,1543,1417.8359,1547,1413.8359" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="288" x2="1549" y1="1413.8359" y2="1413.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="295" y="1408.77">Disable Activity Tracing</text><path d="M229,1428.8359 L293,1428.8359 L293,1435.8359 L283,1445.8359 L229,1445.8359 L229,1428.8359 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="119.3359" style="stroke: #000000; stroke-width: 2.0;" width="1269" x="229" y="1428.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="244" y="1441.9028">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="191" x="308" y="1441.0464">[enable event-based_activity]</text><polygon fill="#A80036" points="922,1463.1016,932,1467.1016,922,1471.1016,926,1467.1016" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="288" x2="928" y1="1467.1016" y2="1467.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="295" y="1462.0356">SyncAndFlush</text><polygon fill="#A80036" points="1138.5,1492.2344,1148.5,1496.2344,1138.5,1500.2344,1142.5,1496.2344" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="934" x2="1144.5" y1="1496.2344" y2="1496.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="941" y="1491.1685">Stop and Flush</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="229" x2="1498" y1="1505.2344" y2="1505.2344"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="194" x="234" y="1515.4448">[disable event-based_activity]</text><polygon fill="#A80036" points="1351.5,1536.1719,1361.5,1540.1719,1351.5,1544.1719,1355.5,1540.1719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="288" x2="1357.5" y1="1540.1719" y2="1540.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="295" y="1535.106">SyncAndFlush</text><!--
@startuml

ProfilerSession -> GpuTracer: Create
ProfilerSession -> GpuTracer: Start
GpuTracer -> CuptiTracer: Create
GpuTracer -> CuptiTracerCollectorImpl: Create
CuptiTracerCollectorImpl -> PerDeviceCollector: Create
GpuTracer -> Annotation: Enable
GpuTracer -> CuptiTracer: Enable
alt enable event-based_activity
    CuptiTracer -> CuptiDriverApiHookWithCudaEvent: Create
    loop for each gpu device
        CuptiDriverApiHookWithCudaEvent -> CudaEventRecorder: Create
    end
else disable event-based_activity
    CuptiTracer -> CuptiDriverApiHookWithActivityApi: Create
end
CuptiTracer -> CuptiInterface: Register CallbackHook
alt has selected callbacks
    CuptiTracer -> CuptiInterface: Enable selected callbacks
else no selected callbacks
    CuptiTracer -> CuptiInterface: Enable all callbacks
end
alt enable activity api
    CuptiTracer -> CuptiInterface: Register Activity Buffer allocation/deallocation callback 
end
alt enable event-based_activity
    CuptiTracer -> CuptiDriverApiHookWithCudaEvent: Create
else disable event-based_activity
    CuptiTracer -> CuptiDriverApiHookWithActivityApi: Create
end
Cupti -> CuptiTracer: HandleCallback
alt enable event-based_activity
    alt Api Enter
        CutiTracer -> CuptiDriverApiHookWithCudaEvent: OnDriverApiEnter
        CuptiDriverApiHookWithCudaEvent -> CudaEventRecorder: StartKernel/StartMemcpy
    else Api Exit
        CuptiTracer -> CuptiDriverApiHookWithCudaEvent: OnDriverApiExit
        CuptiDriverApiHookWithCudaEvent -> CudaEventRecorder: StopKernel/StopMemcpy
        CuptiTracer -> CuptiTracerCollectorImpl: Add annotation 
        CuptiTracer -> CuptiTracerCollectorImpl: Add event 
        CuptiTracerCollectorImpl -> PerDeviceCollector: Add event 
    end
else disable event-based_activity
    alt Api Enter
        CuptiTracer -> CuptiDriverApiHookWithActivityApi
    else Api Exit
        CuptiTracer -> CuptiTracerCollectorImpl: Add event 
        CuptiTracerCollectorImpl -> PerDeviceCollector: Add event 
    end
end
ProfilerSession -> GpuTracer: CollectData
GpuTracer -> CuptiTracerCollectorImpl: Export
loop for each gpu device
    CuptiTracerCollectorImpl -> PerDeviceCollector: Flush
    PerDeviceCollector -> StepStats: Add device stats
end 
ProfilerSession -> GpuTracer: Stop
GpuTracer -> CuptiTracer: Disable
CuptiTracer -> CuptiInterface: Disable Api Tracing
CuptiTracer -> CuptiInterface: Disable Activity Tracing
alt enable event-based_activity
    CuptiTracer -> CuptiDriverApiHookWithCudaEvent: SyncAndFlush
    CuptiDriverApiHookWithCudaEvent -> CudaEventRecorder: Stop and Flush
else disable event-based_activity
    CuptiTracer -> CuptiDriverApiHookWithActivityApi: SyncAndFlush
end

@enduml

PlantUML version 1.2018.13(Tue Nov 27 01:11:51 CST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.7+10-post-Ubuntu-3ubuntu1
Operating System: Linux
OS Version: 5.4.0-40-generic
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>